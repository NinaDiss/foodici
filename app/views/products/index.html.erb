<br>
<br>
<br>
<br>
<div class="ml-5 border-bottom">
  <div>
    <h5>ADRESSE DE DEPART 🖊</h5>
    <p>17 rue des Oiseaux, Dinan</p>
  </div>
  <%#= cl_image_tag à petit pas %>
  <%#= cl_image_tag à pied %>
  <%#= cl_image_tag à vélo%>
  <%#= cl_image_tag en voiture %>
</div>
<div class="ml-5 mt-3 ">
  <div class="form-inline mt-3">
    <%= form_tag products_path, method: :get do %>
      <%= text_field_tag :query,
        params[:query],
        class: "form-control",
        placeholder: "ingrédient"
      %>
      <%= submit_tag "🔍", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>
<div class="m-5 d-flex justify-content-around">
  <div class="">
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="pills-tout-tab" data-toggle="pill" href="#pills-tout" role="tab" aria-controls="pills-tout" aria-selected="true">Tout</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-boucherie-tab" data-toggle="pill" href="#pills-boucherie" role="tab" aria-controls="pills-boucherie" aria-selected="true">Boucherie</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-maraîcher-tab" data-toggle="pill" href="#pills-maraîcher" role="tab" aria-controls="pills-maraîcher" aria-selected="false">Maraîcher</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-vins-et-spiritueux-tab" data-toggle="pill" href="#pills-vins-et-spiritueux" role="tab" aria-controls="pills-vins-et-spiritueux" aria-selected="false">Vins et spiritueux</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-epicerie-fine-tab" data-toggle="pill" href="#pills-epicerie-fine" role="tab" aria-controls="pills-epicerie-fine" aria-selected="true">Epicerie fine</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-boulangerie-tab" data-toggle="pill" href="#pills-boulangerie" role="tab" aria-controls="pills-boulangerie" aria-selected="true">Boulangerie</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-poissonnerie-tab" data-toggle="pill" href="#pills-poissonnerie" role="tab" aria-controls="pills-poissonnerie" aria-selected="true">Poissonnerie</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-cremerie-tab" data-toggle="pill" href="#pills-cremerie" role="tab" aria-controls="pills-cremerie" aria-selected="true">Crémerie</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-produits-regionaux-tab" data-toggle="pill" href="#pills-produits-regionaux" role="tab" aria-controls="pills-produits-regionaux" aria-selected="true">Produits régionaux</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-bio-tab" data-toggle="pill" href="#pills-bio" role="tab" aria-controls="pills-bio" aria-selected="true">Bio</a>
      </li>
    </ul>
    <div class="d-flex">
      <div class="products-list-wrapper tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-tout" role="tabpanel" aria-labelledby="pills-tout-tab">

          <%#= TEST %>


        <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <div class="col-md-4 mb-4">
                <div class="card-trip">
              <%#= link_to product, class: "link-product" do %>
​
                    <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
              <%# end %>

                    <% if product.organic == true %>
                    <div class="badge badge-success">
                      <p>bio</p>
                    </div>
                    <% end %>

                  
                  <div class="card-trip-infos">
                    <div>
                      <p><small><%= product.shop.name %></small></p>
                      <h5><%= product.name %></h5>
                    </div>
                    <div class="card-price">

                      
                      <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                    </div>
        <!-- panier -->
                    <div class="container-compteur">

                      <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                      <div class="compteur hidden">

                        <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                          -
                        </button>
                        <input type="number" name="number" min="0" max="100" value="0">
                        <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();">
                          +
                        </button>

                        <div class="submit"></div>
                      </div>
                  </div>
​
        <!-- panier end -->
                  </div>
                </div>
            </div>
          <% end %>
​
          </div>
        </div>


        <%#= TEST END %>

        </div>
        <div class="tab-pane fade show" id="pills-boucherie" role="tabpanel" aria-labelledby="pills-boucherie-tab">
          Produits
        </div>
        <div class="tab-pane fade" id="pills-maraîcher" role="tabpanel" aria-labelledby="pills-fruits-et-legumes-tab">
          Produits
        </div>
        <div class="tab-pane fade" id="pills-vins-et-spiritueux" role="tabpanel" aria-labelledby="pills-vins-et-spiritueux-tab">
          Produits
        </div>
        <div class="tab-pane fade" id="pills-epicerie-fine" role="tabpanel" aria-labelledby="pills-epicerie-fine-tab">
          Produits
        </div>
        <div class="tab-pane fade" id="pills-boulangerie" role="tabpanel" aria-labelledby="pills-boulangerie-tab">
          Produits
        </div>
        <div class="tab-pane fade" id="pills-poissonnerie" role="tabpanel" aria-labelledby="pills-poissonnerie-tab">
          Produits
        </div>
        <div class="tab-pane fade" id="pills-cremerie" role="tabpanel" aria-labelledby="pills-cremerie-tab">
          Produits
        </div>
        <div class="tab-pane fade" id="pills-produits-régionaux" role="tabpanel" aria-labelledby="pills-produits-régionaux-tab">
          Produits
        </div>
        <div class="tab-pane fade" id="pills-bio" role="tabpanel" aria-labelledby="pills-bio-tab">
          Produits
        </div>
      </div>
      <div class="list-course products-cart-wrapper">
        <div class="container">
          <div class="text-center p-3" id="border-bottom">
            Mes courses
          </div>
           <%= render 'cartlist' %>
        </div>
      </div>
    </div>
  </div>
</div>


<script>


var baskets = document.querySelectorAll(".basket");
var counters = document.querySelectorAll(".compteur");

baskets.forEach(function (basket, index) {
    basket.addEventListener("click", function(){
      basket.classList.toggle("main-cta");
      counters[index].classList.toggle("show");
    });
})

</script>

