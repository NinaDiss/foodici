<br>
<br>
<br>
<br>
<div class="ml-5 border-bottom">
  <div>
    <h5>ADRESSE DE DEPART 🖊</h5>
    <p>17 rue des Oiseaux, Dinan</p>
  </div>
  <%#= cl_image_tag à petit pas %>
  <%#= cl_image_tag à pied %>
  <%#= cl_image_tag à vélo%>
  <%#= cl_image_tag en voiture %>
</div>
<div class="ml-5 mt-3 ">
  <div class="form-inline mt-3">
    <%= form_tag products_path, method: :get do %>
      <%= text_field_tag :query,
        params[:query],
        class: "form-control",
        placeholder: "ingrédient"
      %>
      <%= submit_tag "🔍", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>
<div class="m-5 d-flex justify-content-around">
  <div class="">
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="pills-tout-tab" data-toggle="pill" href="#pills-tout" role="tab" aria-controls="pills-tout" aria-selected="true">Tout</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-boucherie-tab" data-toggle="pill" href="#pills-boucherie" role="tab" aria-controls="pills-boucherie" aria-selected="true">Boucherie</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-maraîcher-tab" data-toggle="pill" href="#pills-maraîcher" role="tab" aria-controls="pills-maraîcher" aria-selected="false">Maraîcher</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-vins-et-spiritueux-tab" data-toggle="pill" href="#pills-vins-et-spiritueux" role="tab" aria-controls="pills-vins-et-spiritueux" aria-selected="false">Vins et spiritueux</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-epicerie-fine-tab" data-toggle="pill" href="#pills-epicerie-fine" role="tab" aria-controls="pills-epicerie-fine" aria-selected="true">Epicerie fine</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-boulangerie-tab" data-toggle="pill" href="#pills-boulangerie" role="tab" aria-controls="pills-boulangerie" aria-selected="true">Boulangerie</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-poissonnerie-tab" data-toggle="pill" href="#pills-poissonnerie" role="tab" aria-controls="pills-poissonnerie" aria-selected="true">Poissonnerie</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-cremerie-tab" data-toggle="pill" href="#pills-cremerie" role="tab" aria-controls="pills-cremerie" aria-selected="true">Crémerie</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-produits-regionaux-tab" data-toggle="pill" href="#pills-produits-regionaux" role="tab" aria-controls="pills-produits-regionaux" aria-selected="true">Produits régionaux</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-bio-tab" data-toggle="pill" href="#pills-bio" role="tab" aria-controls="pills-bio" aria-selected="true">Bio</a>
      </li>
    </ul>
    <div class="d-flex">
      <div class="products-list-wrapper tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-tout" role="tabpanel" aria-labelledby="pills-tout-tab">

          <%#= TOUT %>


        <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <div class="col-md-4 mb-4">
                <div class="card-trip">
                  <%= link_to product, class: "link-product" do %>
​
                    <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                  <% end %>
                    <% if product.organic == true %>
                    <div class="badge badge-success">
                      <p>BIO</p>
                    </div>
                    <% end %>

                  <%= link_to product, class: "link-product" do %>
                    <div class="card-trip-infos">
                      <div>
                        <p><small><%= product.shop.name %></small></p>
                        <h5><%= product.name %></h5>
                      </div>
                      <div class="card-price">
                  <% end %>

                      <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                    </div>
        <!-- panier -->
                    <div class="container-compteur">
                      <%= simple_form_for [product, @order_line] do |f| %>
                        <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                        <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                        <div id="compteur" class="compteur hidden">
                          <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                            -
                          </button>

                          <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                          <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                            +
                          </button>

                        </div>
                      <% end %>

                    </div>

        <!-- panier end -->
                  </div>
                </div>
            </div>
              <% end %>
​
          </div>
        </div>


        <%#= TOUT END %>

        </div>
        <div class="tab-pane fade show" id="pills-boucherie" role="tabpanel" aria-labelledby="pills-boucherie-tab">

          <!-- boucherie -->

          <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
          <% if product.shop.category == "Boucher" %>
            <div class="col-md-4 mb-4">
                <div class="card-trip">
                  <%= link_to product, class: "link-product" do %>
​
                    <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                  <% end %>
                    <% if product.organic == true %>
                    <div class="badge badge-success">
                      <p>BIO</p>
                    </div>
                    <% end %>

                  <%= link_to product, class: "link-product" do %>
                    <div class="card-trip-infos">
                      <div>
                        <p><small><%= product.shop.name %></small></p>
                        <h5><%= product.name %></h5>
                      </div>
                      <div class="card-price">
                  <% end %>

                      <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                    </div>
        <!-- panier -->
                    <div class="container-compteur">
                      <%= simple_form_for [product, @order_line] do |f| %>
                        <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                        <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                        <div id="compteur" class="compteur hidden">
                          <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                            -
                          </button>

                          <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                          <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                            +
                          </button>

                        </div>
                      <% end %>

                    </div>

        <!-- panier end -->
                  </div>
                </div>
            </div>
            <% end %>
              <% end %>
​
          </div>
        </div>

        <!-- boucherie end -->

        </div>
        <div class="tab-pane fade" id="pills-maraîcher" role="tabpanel" aria-labelledby="pills-fruits-et-legumes-tab">

          <!-- fruits et légumes-->
          <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <% if product.shop.category == "Fruits et légumes" %>
              <div class="col-md-4 mb-4">
                  <div class="card-trip">
                    <%= link_to product, class: "link-product" do %>
  ​
                      <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                    <% end %>
                      <% if product.organic == true %>
                      <div class="badge badge-success">
                        <p>BIO</p>
                      </div>
                      <% end %>

                    <%= link_to product, class: "link-product" do %>
                      <div class="card-trip-infos">
                        <div>
                          <p><small><%= product.shop.name %></small></p>
                          <h5><%= product.name %></h5>
                        </div>
                        <div class="card-price">
                    <% end %>

                        <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                      </div>
          <!-- panier -->
                      <div class="container-compteur">
                        <%= simple_form_for [product, @order_line] do |f| %>
                          <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                          <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                          <div id="compteur" class="compteur hidden">
                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                              -
                            </button>

                            <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                              +
                            </button>

                          </div>
                        <% end %>

                      </div>

          <!-- panier end -->
                    </div>
                  </div>
              </div>
              <% end %>
            <% end %>
​
          </div>
        </div>
          <!-- fruits et légumes end-->

        </div>
        <div class="tab-pane fade" id="pills-vins-et-spiritueux" role="tabpanel" aria-labelledby="pills-vins-et-spiritueux-tab">

          <!-- caviste -->
           <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <% if product.shop.category == "Caviste" %>
              <div class="col-md-4 mb-4">
                  <div class="card-trip">
                    <%= link_to product, class: "link-product" do %>
  ​
                      <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                    <% end %>
                      <% if product.organic == true %>
                      <div class="badge badge-success">
                        <p>BIO</p>
                      </div>
                      <% end %>

                    <%= link_to product, class: "link-product" do %>
                      <div class="card-trip-infos">
                        <div>
                          <p><small><%= product.shop.name %></small></p>
                          <h5><%= product.name %></h5>
                        </div>
                        <div class="card-price">
                    <% end %>

                        <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                      </div>
          <!-- panier -->
                      <div class="container-compteur">
                        <%= simple_form_for [product, @order_line] do |f| %>
                          <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                          <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                          <div id="compteur" class="compteur hidden">
                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                              -
                            </button>

                            <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                              +
                            </button>

                          </div>
                        <% end %>

                      </div>

          <!-- panier end -->
                    </div>
                  </div>
              </div>
              <% end %>
            <% end %>
​
          </div>
        </div>
          <!-- caviste  end-->

        </div>
        <div class="tab-pane fade" id="pills-epicerie-fine" role="tabpanel" aria-labelledby="pills-epicerie-fine-tab">

          <!-- epicerie -->
          <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <% if product.shop.category == "Epicerie fine" %>
              <div class="col-md-4 mb-4">
                  <div class="card-trip">
                    <%= link_to product, class: "link-product" do %>
  ​
                      <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                    <% end %>
                      <% if product.organic == true %>
                      <div class="badge badge-success">
                        <p>BIO</p>
                      </div>
                      <% end %>

                    <%= link_to product, class: "link-product" do %>
                      <div class="card-trip-infos">
                        <div>
                          <p><small><%= product.shop.name %></small></p>
                          <h5><%= product.name %></h5>
                        </div>
                        <div class="card-price">
                    <% end %>

                        <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                      </div>
          <!-- panier -->
                      <div class="container-compteur">
                        <%= simple_form_for [product, @order_line] do |f| %>
                          <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                          <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                          <div id="compteur" class="compteur hidden">
                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                              -
                            </button>

                            <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                              +
                            </button>

                          </div>
                        <% end %>

                      </div>

          <!-- panier end -->
                    </div>
                  </div>
              </div>
              <% end %>
            <% end %>
​
          </div>
        </div>
          <!-- epicerie  end-->

        </div>
        <div class="tab-pane fade" id="pills-boulangerie" role="tabpanel" aria-labelledby="pills-boulangerie-tab">

          <!-- boulangerie -->
          <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <% if product.shop.category == "Boulanger" %>
              <div class="col-md-4 mb-4">
                  <div class="card-trip">
                    <%= link_to product, class: "link-product" do %>
  ​
                      <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                    <% end %>
                      <% if product.organic == true %>
                      <div class="badge badge-success">
                        <p>BIO</p>
                      </div>
                      <% end %>

                    <%= link_to product, class: "link-product" do %>
                      <div class="card-trip-infos">
                        <div>
                          <p><small><%= product.shop.name %></small></p>
                          <h5><%= product.name %></h5>
                        </div>
                        <div class="card-price">
                    <% end %>

                        <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                      </div>
          <!-- panier -->
                      <div class="container-compteur">
                        <%= simple_form_for [product, @order_line] do |f| %>
                          <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                          <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                          <div id="compteur" class="compteur hidden">
                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                              -
                            </button>

                            <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                              +
                            </button>

                          </div>
                        <% end %>

                      </div>

          <!-- panier end -->
                    </div>
                  </div>
              </div>
              <% end %>
            <% end %>
​
          </div>
        </div>
          <!-- boulangerie  end-->

        </div>
        <div class="tab-pane fade" id="pills-poissonnerie" role="tabpanel" aria-labelledby="pills-poissonnerie-tab">

          <!-- poissonnerie -->
          <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <% if product.shop.category == "Poissonier" %>
              <div class="col-md-4 mb-4">
                  <div class="card-trip">
                    <%= link_to product, class: "link-product" do %>
  ​
                      <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                    <% end %>
                      <% if product.organic == true %>
                      <div class="badge badge-success">
                        <p>BIO</p>
                      </div>
                      <% end %>

                    <%= link_to product, class: "link-product" do %>
                      <div class="card-trip-infos">
                        <div>
                          <p><small><%= product.shop.name %></small></p>
                          <h5><%= product.name %></h5>
                        </div>
                        <div class="card-price">
                    <% end %>

                        <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                      </div>
          <!-- panier -->
                      <div class="container-compteur">
                        <%= simple_form_for [product, @order_line] do |f| %>
                          <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                          <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                          <div id="compteur" class="compteur hidden">
                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                              -
                            </button>

                            <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                              +
                            </button>

                          </div>
                        <% end %>

                      </div>

          <!-- panier end -->
                    </div>
                  </div>
              </div>
              <% end %>
            <% end %>
​
          </div>
        </div>
          <!-- poissonnerie  end-->

        </div>
        <div class="tab-pane fade" id="pills-cremerie" role="tabpanel" aria-labelledby="pills-cremerie-tab">

          <!-- fromage -->
          <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <% if product.shop.category == "Fromager" %>
              <div class="col-md-4 mb-4">
                  <div class="card-trip">
                    <%= link_to product, class: "link-product" do %>
  ​
                      <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                    <% end %>
                      <% if product.organic == true %>
                      <div class="badge badge-success">
                        <p>BIO</p>
                      </div>
                      <% end %>

                    <%= link_to product, class: "link-product" do %>
                      <div class="card-trip-infos">
                        <div>
                          <p><small><%= product.shop.name %></small></p>
                          <h5><%= product.name %></h5>
                        </div>
                        <div class="card-price">
                    <% end %>

                        <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                      </div>
          <!-- panier -->
                      <div class="container-compteur">
                        <%= simple_form_for [product, @order_line] do |f| %>
                          <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                          <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                          <div id="compteur" class="compteur hidden">
                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                              -
                            </button>

                            <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                              +
                            </button>

                          </div>
                        <% end %>

                      </div>

          <!-- panier end -->
                    </div>
                  </div>
              </div>
              <% end %>
            <% end %>
​
          </div>
        </div>
          <!-- fromage  end-->

        </div>
        <div class="tab-pane fade" id="pills-produits-régionaux" role="tabpanel" aria-labelledby="pills-produits-régionaux-tab">

          <!-- produits régionaux -->
          <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <% if product.shop.category == "Crêpier" %>
              <div class="col-md-4 mb-4">
                  <div class="card-trip">
                    <%= link_to product, class: "link-product" do %>
  ​
                      <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                    <% end %>
                      <% if product.organic == true %>
                      <div class="badge badge-success">
                        <p>BIO</p>
                      </div>
                      <% end %>

                    <%= link_to product, class: "link-product" do %>
                      <div class="card-trip-infos">
                        <div>
                          <p><small><%= product.shop.name %></small></p>
                          <h5><%= product.name %></h5>
                        </div>
                        <div class="card-price">
                    <% end %>

                        <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                      </div>
          <!-- panier -->
                      <div class="container-compteur">
                        <%= simple_form_for [product, @order_line] do |f| %>
                          <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                          <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                          <div id="compteur" class="compteur hidden">
                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                              -
                            </button>

                            <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                              +
                            </button>

                          </div>
                        <% end %>

                      </div>

          <!-- panier end -->
                    </div>
                  </div>
              </div>
              <% end %>
            <% end %>
​
          </div>
        </div>
          <!-- produits régionaux  end-->

        </div>
        <div class="tab-pane fade" id="pills-bio" role="tabpanel" aria-labelledby="pills-bio-tab">

          <!-- BIO -->
          <div class="d-flex justify-content-around m-4">
          <div class="row opacity-color">
          <% @products.each do |product| %>
            <% if product.shop.category == "Boulangerie" %>
              <div class="col-md-4 mb-4">
                  <div class="card-trip">
                    <%= link_to product, class: "link-product" do %>
  ​
                      <%= image_tag product.photo, crop: :fill, class: "img-product-card"%>
                    <% end %>
                      <% if product.organic == true %>
                      <div class="badge badge-success">
                        <p>BIO</p>
                      </div>
                      <% end %>

                    <%= link_to product, class: "link-product" do %>
                      <div class="card-trip-infos">
                        <div>
                          <p><small><%= product.shop.name %></small></p>
                          <h5><%= product.name %></h5>
                        </div>
                        <div class="card-price">
                    <% end %>

                        <div class="price-currency"><strong><%= product.price %></strong> €/<%= product.unit %></div>
                      </div>
          <!-- panier -->
                      <div class="container-compteur">
                        <%= simple_form_for [product, @order_line] do |f| %>
                          <div class="basket"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></div>
                          <button type="submit" class= "main-cta hidden"><%= image_tag "picto/panier.svg", class: "nav-link picto", crop: :fill, width: 50 %></button>

                          <div id="compteur" class="compteur hidden">
                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepDown();">
                              -
                            </button>

                            <input class="" type="number" step="1" name="order_line[quantity]" id="order_line_quantity">

                            <button type="button" onclick="this.parentNode.querySelector('[type=number]').stepUp();" class="">
                              +
                            </button>

                          </div>
                        <% end %>

                      </div>

          <!-- panier end -->
                    </div>
                  </div>
              </div>
              <% end %>
            <% end %>
​
          </div>
        </div>
          <!-- BIO  end-->

        </div>
      </div>
      <div class="card courses-2 products-cart-wrapper">
        <div class="container">
          <div class="text-center p-3" id="border-bottom">
            Mes courses
          </div>
           <%= render 'cartlist' %>
        </div>
      </div>
    </div>
  </div>
</div>


<script>


var baskets = document.querySelectorAll(".basket");
var counters = document.querySelectorAll(".compteur");
var submits = document.querySelectorAll(".main-cta");

baskets.forEach(function (basket, index) {
    basket.addEventListener("click", function(){
      basket.classList.add("hidden");
      submits[index].classList.remove("hidden");
      counters[index].classList.remove("hidden");

            submits.forEach(function (submit, index) {
          submit.addEventListener("click", function(){
            basket.classList.remove("hidden");
            submits[index].classList.add("hidden");
            counters[index].classList.add("hidden");
         });
      })
    });
})

</script>

